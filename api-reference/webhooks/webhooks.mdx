---
title: "Webhooks"
description: ""
---

## Authenticating webhooks

To authenticate an incoming webhook event you can check the `extend-signature` header on the request and match it against the webhook secret
available in your Extend dashboard settings. If the `extend-signature` header value does not match your secret, you should toss out the incoming event.

## The webhook event

### Fields

| Field     | Description                                                                                                                                                     |
| --------- | --------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| eventId   | **string** - Unique identifier for the event                                                                                                                    |
| eventType | **string** - Type of the event that occurred (workflow_run.completed)                                                                                           |
| payload   | **object** - Contains the data related to the event. In this case, it includes the properties of a completed workflow run from the IPublicWorkflowRun interface |

Here is what you can expect for a given incoming event:

```json Event
{
  "eventId": "event_jfdkfjsek",
  "eventType": "e.g. workflow.created, workflow_run.completed",
  "payload": {
    "object": "workflow_run",
    "id": "wr_fhdsjkfd"
    // etc.
  }
}
```

## List of all event types

The following table outlines the various event types you can receive via webhooks:

| Event Type                | Description                                     |
| ------------------------- | ----------------------------------------------- |
| workflow_run.completed    | Triggered whenever a WorkflowRun is completed   |
| workflow_run.failed       | Triggered whenever a WorkflowRun fails          |
| workflow_run.needs_review | Triggered whenever a WorkflowRun needs review\* |
| workflow.created          | Triggered whenever a new Workflow is created    |

\*Only triggered when the workflow is configured to have a HumanReview step in the Extend workflow builder

## Example: `workflow_run.completed`

Once a workflow run is completed, if your workflow is configured to send a webhook, a `workflow_run.completed` event
will be pushed to your system, assuming you have defined a webhook url in your dashboard. Please reach out if you require any help
getting set up.

Example Output:

```json Response
{
  "eventId": "event_1234",
  "eventType": "workflow_run.completed",
  "payload": {
    "object": "workflow_run",
    "id": "workflow_run_1234",
    "status": "PROCESSED",
    "metadata": {
      "is_important": true,
      "some_id": "id_fjdsfkld"
      // any other metadata fields you attach when creating the run
    },
    "fileName": "example_file_name.pdf",
    "fileUrl": "https://example.com/example_file_name.pdf",
    "fileMetadata": {
      "type": "PDF",
      "details": {
        "pageCount": 1
      }
    },
    "outputs": [
      {
        "object": "document_processor_run",
        "id": "dpr_ER67I84cIbOYtbReCTLZD",
        "edited": true,
        "type": "EXTRACT",
        "config": {
          "fieldsToExtract": [
            {
              "id": "example_id_1",
              "type": "number",
              "fieldName": "invoice_number",
              "description": "The invoice number for this invoice"
            }
          ]
        },
        "initialOutput": {
          "invoice_number": {
            "id": "example_id_1",
            "type": "number",
            "value": null,
            "confidence": 0
          }
        },
        // Only set when a workflow run was explicitly reviewed by a human
        "reviewedOutput": {
          "invoice_number": {
            "id": "example_id_1",
            "type": "number",
            "value": 155,
            "confidence": 1
          }
        },
        "output": {
          "invoice_number": {
            "id": "example_id_1",
            "type": "number",
            "value": 155,
            "confidence": 1
          }
        }
      }
    ],
    "initialRunBy": "test@test.com",
    "initialRunAt": "2023-01-01T09:41:00.000Z",
    "reviewedBy": null,
    "reviewedAt": null,
    "startTime": "2023-01-01T09:41:00.000Z",
    "endTime": "2023-01-01T09:43:00.000Z",
    "workflow": {
      "id": "workflow_1234",
      "name": "employees"
    }
  }
}
```

To set up a webhook, please reach out to an Extend team member with the URL of the webhook where you'd like the output to be sent and the Workflow this should be applied to.

<br />
<br />

# Output Types

**Note**: The output objects shown in the payload above will conform to the following schema, and the field keys are defined when configuring the extractor/classifer
in your worklfow builder:

```typescript Output types
/* The output type when type=EXTRACT */
export interface ExtractionOutput {
  [key: string]: ExtractFieldResult;
}

export interface ExtractorFieldInput {
  fieldName: string;
  description: string;
  type:
    | "string"
    | "number"
    | "currency"
    | "boolean"
    | "date"
    | "any[]"
    | "object";
  schema?: ExtractorFieldInput[];
}

export interface ExtractionFieldResult {
  value: string;
  confidence: number;
  type:
    | "string"
    | "number"
    | "currency"
    | "boolean"
    | "date"
    | "array"
    | "object"
    | "null";
  schema?: ExtractorFieldInput[]; // Only set when type=array or type=object to provide structure of sub fields
}

/* The output type when type=CLASSIFY */
export type ClassificationOutput = {
  type: string;
  confidence: number;
};

export type Classification = {
  type: string;
  description: string;
};
```
